import{ai as o,aj as v,al as u,ao as ht,pe as it,pf as Y,bU as x,pg as i,qe as bt,aL as z,aR as k,ah as at,tN as yt,qI as wt,oL as Tt,d8 as Lt,oO as J,rP as ot,cq as M,cP as Mt,oM as xt,wc as zt,oP as kt}from"./index-71d9419a.js";import{e as Ct,q as lt,x as Et,F as Ot,S as Nt,k as Rt,T as ut,a as Ht,r as $}from"./quantityFormatUtils-cef85377.js";import{f as gt,s as vt,m as L,Z as O,x as Pt}from"./euclideanLengthMeasurementUtils-faafd31e.js";import{geodesicLength as mt}from"./geometryEngine-85c414bd.js";let y=class extends ht{constructor(t){super(t),this.helpMessage=void 0}};o([v()],y.prototype,"tooltipOptions",void 0),o([v()],y.prototype,"helpMessage",void 0),y=o([u("esri.views.interactive.tooltip.SketchTooltipInfo")],y);const _="esri-tooltip",r=`${_}-content`,St=`${_}-table`,Vt=`${_}-help-message`;let h=class extends Y{get _units(){const t=Ct(this.tooltip.view);return{length:t,verticalLength:t,area:t}}_getHelpMessage(t){var tt,et,st,nt;const{info:e}=this,{tooltipOptions:n,helpMessage:a,viewType:c}=e,p=(tt=n==null?void 0:n.visibleElements)==null?void 0:tt.helpMessage,m=t??a,_t=c==="3d"?"helpMessages3d":"helpMessages2d";return p&&m?(nt=(st=(et=this._messagesTooltip)==null?void 0:et.sketch)==null?void 0:st[_t])==null?void 0:nt[m]:void 0}_formatScale(t){return x(t,{style:"percent",maximumFractionDigits:0})}_formatRelativeOrientation(t){return x(t,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})}_formatLength(t,e,n){return lt(this._messagesUnits,t,e??this._units.length,n)}_formatRelativeLength(t){return Et(this._messagesUnits,t,this._units.length)}_formatVerticalLength(t){return Ot(this._messagesUnits,t,this._units.verticalLength)}_formatRelativeVerticalLength(t){return Nt(this._messagesUnits,t,this._units.verticalLength)}_formatTotalLength(t){return lt(this._messagesUnits,t,this._units.length)}_formatArea(t){return Rt(this._messagesUnits,t,this._units.area)}_formatPercentage(t){return x(t.value,{style:"percent"})}};o([v()],h.prototype,"info",void 0),o([v()],h.prototype,"tooltip",void 0),o([v()],h.prototype,"_units",null),o([it("esri/core/t9n/Units"),v()],h.prototype,"_messagesUnits",void 0),o([it("esri/views/interactive/tooltip/t9n/Tooltip"),v()],h.prototype,"_messagesTooltip",void 0),h=o([u("esri.views.interactive.tooltip.content.TooltipContent")],h);function g({className:s,helpMessage:t},...e){const n=e.filter(a=>!!a);return i("div",{class:bt(s,r)},n.length>0?i("div",{class:St},...n):null,t?i("div",{key:"help-message",class:Vt},t):null)}const C=`${_}-field`,E={base:C,title:`${C}__title`,value:`${C}__value`};let l=class extends Y{render(){return i("div",{class:E.base},i("div",{class:E.title},this.title),i("div",{class:E.value},this.value))}};o([v()],l.prototype,"title",void 0),o([v()],l.prototype,"value",void 0),l=o([u("esri.views.interactive.tooltip.support.TooltipField")],l);const Ut={base:`${_}-value-by-value`};let d=class extends Y{constructor(){super(...arguments),this.divider="Ã—"}render(){return i("div",{class:Ut.base},i("span",null,this.left),i("span",null,this.divider),i("span",null,this.right))}};o([v()],d.prototype,"left",void 0),o([v()],d.prototype,"divider",void 0),o([v()],d.prototype,"right",void 0),d=o([u("esri.views.interactive.tooltip.support.ValueByValue")],d);const Wt={base:`${r} ${`${r}--draw-rectangle`}`};let N=class extends h{render(){const{area:t,radius:e,xSize:n,ySize:a,tooltipOptions:c}=this.info,{visibleElements:p}=c,m=this._messagesTooltip.sketch;return i(g,{className:Wt.base,helpMessage:this._getHelpMessage()},p.radius&&e!=null&&i(l,{title:m.radius,value:this._formatLength(e)}),p.size&&n!=null&&a!=null&&i(l,{title:m.size,value:i(d,{left:this._formatLength(n),right:this._formatLength(a)})}),p.area&&i(l,{title:m.area,value:this._formatArea(t)}))}};N=o([u("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],N);const At={base:`${r}--draw-mesh`};let R=class extends h{render(){const{elevation:t,tooltipOptions:e}=this.info,{visibleElements:n}=e,a=this._messagesTooltip.sketch;return i(g,{className:At.base,helpMessage:this._getHelpMessage()},n.elevation&&i(l,{title:a.elevation,value:this._formatVerticalLength(t)}))}};R=o([u("esri.views.interactive.tooltip.content.TooltipContentDrawMesh")],R);const Dt={base:`${r}--draw-point`};let H=class extends h{render(){const{elevation:t,tooltipOptions:e}=this.info,{visibleElements:n}=e,a=this._messagesTooltip.sketch;return i(g,{className:Dt.base,helpMessage:this._getHelpMessage()},n.elevation&&i(l,{title:a.elevation,value:this._formatVerticalLength(t)}))}};H=o([u("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],H);const Zt={base:`${r} ${`${r}--draw-polygon`}`};let P=class extends h{render(){const{area:t,elevation:e,tooltipOptions:n,viewType:a}=this.info,{visibleElements:c}=n,p=this._messagesTooltip.sketch;return i(g,{className:Zt.base,helpMessage:this._getHelpMessage()},c.elevation&&a!=="2d"&&i(l,{title:p.elevation,value:this._formatVerticalLength(e)}),c.area&&i(l,{title:p.area,value:this._formatArea(t)}))}};P=o([u("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],P);const qt={base:`${r} ${`${r}--draw-polyline`}`};let S=class extends h{render(){const{elevation:t,totalLength:e,tooltipOptions:n,viewType:a}=this.info,{visibleElements:c}=n,p=this._messagesTooltip.sketch;return i(g,{className:qt.base,helpMessage:this._getHelpMessage()},c.elevation&&a!=="2d"&&i(l,{title:p.elevation,value:this._formatVerticalLength(t)}),c.totalLength&&i(l,{title:p.totalLength,value:this._formatLength(e)}))}};S=o([u("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],S);const Ft={base:`${r} ${`${r}--draw-rectangle`}`};let V=class extends h{render(){const{area:t,xSize:e,ySize:n,tooltipOptions:a}=this.info,{visibleElements:c}=a,p=this._messagesTooltip.sketch;return i(g,{className:Ft.base,helpMessage:this._getHelpMessage()},c.size&&e!=null&&n!=null&&i(l,{title:p.size,value:i(d,{left:this._formatLength(e),right:this._formatLength(n)})}),c.area&&i(l,{title:p.area,value:this._formatArea(t)}))}};V=o([u("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],V);const Gt={base:`${r} ${`${r}--extent-rotate`}`};let U=class extends h{render(){const{angle:s,tooltipOptions:t}=this.info,{visibleElements:e}=t,n=this._messagesTooltip.sketch;return i(g,{className:Gt.base,helpMessage:this._getHelpMessage()},e.rotation&&i(l,{title:n.rotation,value:this._formatRelativeOrientation(s)}))}};U=o([u("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],U);const jt={base:`${r} ${`${r}--extent-scale`}`};let W=class extends h{render(){const t=this.info,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return i(g,{className:jt.base,helpMessage:this._getHelpMessage()},e.size&&i(l,{title:n.size,value:i(d,{left:this._formatLength(t.xSize),right:this._formatLength(t.ySize)})}),e.scale&&i(l,{title:n.scale,value:i(d,{left:this._formatScale(t.xScale),right:this._formatScale(t.yScale)})}))}};W=o([u("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],W);const Bt={base:`${r} ${`${r}--reshape-edge-offset`}`};let A=class extends h{render(){const{area:t,distance:e,totalLength:n,tooltipOptions:a}=this.info,{visibleElements:c}=a,p=this._messagesTooltip.sketch;return i(g,{className:Bt.base,helpMessage:this._getHelpMessage()},c.distance&&i(l,{title:p.distance,value:this._formatRelativeLength(e)}),c.area&&t!=null&&i(l,{title:p.area,value:this._formatArea(t)}),c.totalLength&&n!=null&&i(l,{title:p.totalLength,value:this._formatLength(n)}))}};A=o([u("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],A);const It={base:`${r} ${`${r}--transform-absolute`}`};let D=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return i(g,{className:It.base,helpMessage:this._getHelpMessage()},e.orientation&&t.orientation!=null&&i(l,{key:"orientation",title:n.orientation,value:ut(t.orientation,t.rotationType,t.orientationPrecision)}),e.size&&t.size!=null&&i(l,{key:"size",title:n.size,value:this._formatLength(t.size,t.sizeUnit,t.sizePrecision)}))}};D=o([u("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],D);const Xt={base:`${r} ${`${r}--transform-rotate`}`};let Z=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return i(g,{className:Xt.base,helpMessage:this._getHelpMessage()},e.rotation&&t.rotation!=null&&i(l,{key:"rotation",title:n.rotation,value:Ht(t.rotation,t.rotationType,t.rotationPrecision)}),e.orientation&&t.orientation!=null&&i(l,{key:"orientation",title:n.orientation,value:ut(t.orientation,t.rotationType,t.orientationPrecision)}))}};Z=o([u("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],Z);const Yt={base:`${r} ${`${r}--transform-scale`}`};let q=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return i(g,{className:Yt.base,helpMessage:this._getHelpMessage()},e.scale&&t.scale!=null&&i(l,{key:"scale",title:n.scale,value:this._formatPercentage(t.scale)}),e.size&&t.size!=null&&i(l,{key:"size",title:n.size,value:this._formatLength(t.size,t.sizeUnit,t.sizePrecision)}))}};q=o([u("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],q);const Jt={base:`${r} ${`${r}--translate-graphic`}`};let F=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return i(g,{className:Jt.base,helpMessage:this._getHelpMessage()},e.distance&&i(l,{title:n.distance,value:this._formatLength(t.distance)}))}};F=o([u("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphic")],F);const Kt={base:`${r} ${`${r}--translate-graphic-xy`}`};let G=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return i(g,{className:Kt.base,helpMessage:this._getHelpMessage()},e.distance&&i(l,{title:n.distance,value:this._formatRelativeLength(t.distance)}))}};G=o([u("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicXY")],G);const Qt={base:`${r} ${`${r}--translate-graphic-z`}`};let j=class extends h{render(){const{info:s}=this,{visibleElements:t}=s.tooltipOptions,e=this._messagesTooltip.sketch;return i(g,{className:Qt.base,helpMessage:this._getHelpMessage()},t.distance&&i(l,{title:e.distance,value:this._formatRelativeVerticalLength(s.distance)}))}};j=o([u("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicZ")],j);const te={base:`${r} ${`${r}--translate-vertex`}`};let B=class extends h{render(){const{distance:t,elevation:e,area:n,totalLength:a,tooltipOptions:c}=this.info,{visibleElements:p}=c,m=this._messagesTooltip.sketch;return i(g,{className:te.base,helpMessage:this._getHelpMessage()},p.distance&&i(l,{title:m.distance,value:this._formatLength(t)}),p.elevation&&e!=null&&i(l,{title:m.elevation,value:this._formatVerticalLength(e)}),p.area&&n!=null&&i(l,{title:m.area,value:this._formatArea(n)}),p.totalLength&&a!=null&&i(l,{title:m.totalLength,value:this._formatLength(a)}))}};B=o([u("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],B);const ee={base:`${r} ${`${r}--translate-vertex`}`};let I=class extends h{render(){const{area:t,distance:e,elevation:n,totalLength:a,tooltipOptions:c}=this.info,{visibleElements:p}=c,m=this._messagesTooltip.sketch;return i(g,{className:ee.base,helpMessage:this._getHelpMessage()},p.distance&&i(l,{title:m.distance,value:this._formatRelativeLength(e)}),p.elevation&&n!=null&&i(l,{title:m.elevation,value:this._formatVerticalLength(n)}),p.area&&t!=null&&i(l,{title:m.area,value:this._formatArea(t)}),p.totalLength&&a!=null&&i(l,{title:m.totalLength,value:this._formatLength(a)}))}};I=o([u("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexXY")],I);const se={base:`${r} ${`${r}--translate-vertex`}`};let X=class extends h{render(){const{distance:t,elevation:e,tooltipOptions:n}=this.info,{visibleElements:a}=n,c=this._messagesTooltip.sketch;return i(g,{className:se.base,helpMessage:this._getHelpMessage()},a.distance&&i(l,{title:c.distance,value:this._formatRelativeVerticalLength(t)}),a.elevation&&e!=null&&i(l,{title:c.elevation,value:this._formatVerticalLength(e)}))}};X=o([u("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexZ")],X);function ne(s,t){if(t==null)return null;const e=document.createElement("div");switch(t.type){case"draw-point":return new H({tooltip:s,info:t,container:e});case"draw-polygon":return new P({tooltip:s,info:t,container:e});case"draw-polyline":return new S({tooltip:s,info:t,container:e});case"draw-mesh":return new R({tooltip:s,info:t,container:e});case"draw-rectangle":return new V({tooltip:s,info:t,container:e});case"draw-circle":return new N({tooltip:s,info:t,container:e});case"extent-rotate":return new U({tooltip:s,info:t,container:e});case"extent-scale":return new W({tooltip:s,info:t,container:e});case"transform-absolute":return new D({tooltip:s,info:t,container:e});case"transform-rotate":return new Z({tooltip:s,info:t,container:e});case"transform-scale":return new q({tooltip:s,info:t,container:e});case"translate-graphic":return new F({tooltip:s,info:t,container:e});case"translate-graphic-z":return new j({tooltip:s,info:t,container:e});case"translate-graphic-xy":return new G({tooltip:s,info:t,container:e});case"translate-vertex":return new B({tooltip:s,info:t,container:e});case"translate-vertex-z":return new X({tooltip:s,info:t,container:e});case"translate-vertex-xy":return new I({tooltip:s,info:t,container:e});case"reshape-edge-offset":return new A({tooltip:s,info:t,container:e})}}const ie={base:`${_}`};let f=class extends ht{constructor(t){super(t),this.info=null,this._contentContainer=(()=>{const e=document.createElement("div");return e.classList.add(ie.base),e})(),this._contentWidget=null}initialize(){const t=this._contentContainer;this.addHandles([z(()=>{var e;return(e=this.view.overlay)==null?void 0:e.surface},e=>{t.remove(),e==null||e.appendChild(t)},k),z(()=>this.info,(e,n)=>{if(this._contentWidget!=null&&e!=null&&n!=null&&e.type===n.type)this._contentWidget.info=e;else{this._contentWidget=at(this._contentWidget);const a=ne(this,e);a&&(this._contentWidget=a,a.container&&t.appendChild(a.container))}},k),z(()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this._screenPoint}),ae,k)])}destroy(){this._contentWidget=at(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get _screenPoint(){const t=this.view.inputManager;return t!=null&&t.multiTouchActive?null:t==null?void 0:t.latestPointerLocation}get test(){var t;return{contentContainer:this._contentContainer,visible:((t=this._contentContainer)==null?void 0:t.style.display)!=="none"}}};function ae({container:s,contentWidget:t,screenPoint:e}){const{style:n}=s;if(e!=null&&t!=null){n.display="block";const a=yt(s),c=`translate(${Math.round(e.x)+rt[0]*(a?-1:1)}px, ${Math.round(e.y)+rt[1]}px)`;n.transform=a?`translate(-100%, 0) ${c}`:c}else n.display="none"}o([v({nonNullable:!0})],f.prototype,"view",void 0),o([v()],f.prototype,"info",void 0),o([v()],f.prototype,"_contentContainer",void 0),o([v()],f.prototype,"_contentWidget",void 0),o([v()],f.prototype,"_screenPoint",null),f=o([u("esri.views.interactive.tooltip.Tooltip")],f);const rt=[20,20];function dt(s,t,e,n,...a){return wt(s)&&Tt(s)?t.apply(void 0,a):Lt(s)?e.apply(void 0,a):n.apply(void 0,a)}function ft(s){const{spatialReference:t}=s;return dt(t,ce,pe,he,s)}function $t(s,t){if(!Mt(s.spatialReference,t.spatialReference))return null;const{spatialReference:e}=s;return w[0]=s.x,w[1]=s.y,w[2]=s.hasZ?s.z:0,T[0]=t.x,T[1]=t.y,T[2]=t.hasZ?t.z:0,K(w,T,e)}function K(s,t,e){return dt(e,oe,le,re,s,t,e)}function oe(s,t,e){return $(J(Q,s,t,e).distance,"meters")}function le(s,t,e){return $(mt(ue(s,t,e),"meters"),"meters")}function re(s,t,e){return ot(s,e,ct)&&ot(t,e,pt)?$(J(Q,ct,pt).distance,"meters"):null}function ce(s){return $(xt([s],"meters")[0],"meters")}function pe(s){return $(mt(s,"meters"),"meters")}function he(s){const t=[];if(!zt(s,t))return null;let e=0;for(const n of t){let a=0;for(let c=1;c<n.length;++c)a+=J(Q,n[c-1],n[c]).distance;e+=a}return $(e,"meters")}function ue(s,t,e){return{type:"polyline",spatialReference:e,paths:[[[...s],[...t]]]}}const Q=new kt,w=M(),T=M(),ct=M(),pt=M();function Ue(s,t){return b(vt,ft,gt,t,s)}function We(s,t,e,n){return b(Pt,K,O,n,s,t,e)}function Ae(s,t,e){return b(L,$t,L,e,s,t)}function De(s,t,e,n){return b(O,K,O,n,s,t,e)}function Ze(s){return b(vt,ft,gt,"on-the-ground",s)}function qe(s,t){return b(L,$t,L,"on-the-ground",s,t)}function b(s,t,e,n,...a){if(n==="on-the-ground"){const c=t.apply(void 0,a);return c??e.apply(void 0,a)}return s.apply(void 0,a)}export{De as a,K as b,f as d,Ze as g,We as l,qe as m,Ue as p,dt as r,Ae as s,y as t};
